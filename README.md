# 편의점

## 기능 구현 목록

### 1. 환영 인사 하기
환영 인사 메시지를 출력한다.

- [ ]  환영인사 메시지 출력

    `안녕하세요. W편의점입니다.`

### 2. 보유하고 있는 상품명, 가격, 재고, 프로모션 이름 안내하기
편의점에 보유하고 있는 상품명, 가격, 재고, 프로모션 이름을 사용자에게 안내한다.

- [ ]  상품 안내 메시지 출력

    `현재 보유하고 있는 상품입니다.`
- [ ]  파일에서 상품명, 가격, 재고, 프로모션 이름 순으로 안내하기
    - [ ] 재고가 0개라면, `재고 없음` 출력
    - [ ] 프로모션이 있는 상품이랑 정가 상품 모두 있으면 프로모션 상품 먼저 출력

### 3. 사용자로부터 구매할 상품과 수량 입력 받기
사용자로부터 구매하고자 하는 상품명과 수량을 입력 받는다.

- [ ]  입력메시지 출력하기

    `구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])`
- [ ]  예외 발생 - 예외 메시지 출력하고 다시 입력 받기

    i. `[ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.`
      - [ ]  [상품명-수량] 형식이 아닐 경우 메시지 출력한 후, 다시 입력 받는다.
      - [ ]  [상품명-수량]이 여러개 구매할 때, 쉼표(,)로 연결되어 있지 않을 경우 메시지 출력한 후, 다시 입력 받는다.
      - [ ]  입력한 상품명이 문자열이 아닐 경우 메시지 출력한 후, 다시 입력 받는다.
      - [ ]  입력한 숫자가 문자열일 경우 메시지 출력한 후, 다시 입력 받는다.

    ii. `[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`
      - [ ]  입력해야할 상품명에 아무것도 입력되어 있지 않다면, 예외 메시지 출력 후, 다시 입력 받는다.
      - [ ]  입력한 수량이 정수 범위의 숫자가 아닐 경우, 예외 메시지 출력 후, 다시 입력 받는다.
      - [ ]  입력한 수량이 0이하일 경우, 예외 메시지 출력 후, 다시 입력 받는다.

### 4. 재고 확인하기
사용자가 주문한 상품과 수량을 기준으로 재고를 확인한다.

- [ ] 구매할 상품명과 수량을 기준으로 재고 확인하기
- [ ] 예외 발생 - 예외 메시지 출력하고 다시 입력 받기

    i. `[ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.`
  - [ ]  상품 수량이 재고 수량을 초과할 경우 메시지 출력한 후, 다시 입력받는다.
  - [ ]  상품 수량이 양의 정수 범위가 아닐 경우 메시지 출력한 후, 다시 입력 받는다.

    ii. `[ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.`
  - [ ]  입력한 상품명이 존재하지 않는 상품일 경우 메시지 출력한 후, 다시 입력 받는다.

### 5. 프로모션 적용 여부 확인 후 총 구매액 계산하기
주문한 상품이 프로모션 상품인지 확인하고, 프로모션 상품일 경우 행사할인가를 계산해 총 구매액을 계산한다.

- [ ] 구매하고자 하는 상품이 프로모션 상품인지 확인하기
- [ ] 프로모션 상품이 아닐 경우
    - [ ]  행사할인 0으로 하기
    - [ ]  상품 목록 재고 차감하여 업데이트 하기
- [ ] 프로모션 상품일 경우
  - [ ] 상품이 프로모션 기간 중인지 확인하기
  - [ ] 사용자가 구매하고자 하는 수량을 기준으로, 보유하고 있는 프로모션 상품 수량 비교하기
    - [ ]  보유하고 있는 프로모션 수량이 구매하고자하는 수량보다 많을 경우
      - [ ]  프로모션 혜택받을 수 있는 메시지 출력

          `현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)`
      - [ ] 사용자가 입력한 Y/N에 따라 행사 할인 증정 개수 확인하기
      - [ ] 증정 개수에 따른 행사할인 금액 확인하기
      - [ ] 프로모션 항목으로 구매한 상품 개수 차감해 업데이트 하기
    - [ ]  보유하고 있는 프로모션 수량이 구매하고자하는 수량보다 적을 경우
        - [ ]  일부 수량에 대해 정가로 결제할지 여부에 대한 안내 메시지 출력

          `현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)`
        - [ ]  수량 = 구매하고자 하는 수량 - 프로모션으로 존재하는 수량
        - [ ]  사용자가 입력한 Y/N에 따라 행사 할인 증정 개수 확인하기
        - [ ]  프로모션 항목 개수 0으로 업데이트 하기
        - [ ]  정가 항목 개수 {수량}만큼 차감하여 업데이트 하기
  - [ ] 행사 할인 금액 확인하기
  - [ ] 프로모션이 적용된 상품마다 각각의 가격 계산하기
- [ ]  예외 발생

  `[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`
  - [ ]  아무것도 입력하지 않은 경우, 예외 메시지 출력 후, 다시 입력 받는다.
  - [ ]  Y와 N 이외의 문자를 입력한 경우, 예외 메시지 출력 후, 다시 입력 받는다.

### 6. 멤버십 회원 할인 여부 결정하기
사용자에게 멤버십 회원 할인을 받을지 의사를 묻는 메시지 출력한 후 멤버십 회원 할인을 받겠다는 사용자에게 한해, 멤버십 할인 금액을 계산한다.

- [ ]  멤버십 회원 할인 여부 메시지 출력하기

    `멤버십 할인을 받으시겠습니까? (Y/N)`
- [ ]  멤버십 회원 할인 받을 경우(Y입력할 경우)
    - [ ]  멤버십 회원 할인 금액 = 프로모션 미적용 금액 * 0.3
    - [ ]  할인 금액이 멤버십 회원 할인 금액의 최대 한도(8000원)보다 클 경우 8000원을 제외한 금액을 최종 금액으로 설정
- [ ]  멤버십 회원 할인을 받을 경우 멤버십할인 금액 확인하기
- [ ]  예외 발생
  `[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`
    - [ ]  아무것도 입력하지 않은 경우, 예외 메시지 출력 후, 다시 입력 받는다.
    - [ ]  Y와 N 이외의 문자를 입력한 경우, 예외 메시지 출력 후, 다시 입력 받는다.

### 7. 영수증 출력하기
사용자에게 영수증을 출력한다.

- [ ]  사용자가 지불해야할 금액 계산하기
  - [ ] 앞서 계산한 행사 할인 금액과 멤버십 금액을 토대로 지불해야할 금액 계산하기
  - [ ] 내실 돈 = 총구매액 - 행사할인 - 멤버십 할인
- [ ]  문자열 포메팅을 통해 영수증 출력하기
  - [ ] 구매내역(상품명, 수량, 금액) 출력
  - [ ] 프로모션이 적용된 상품일 경우, 증정내역 출력
  - [ ] 총 구매액, 행사 할인, 멤버십 할인, 내실 돈 출력
   
### 8. 추가 구매 여부 확인하기
추가 상품을 구매할지 의사를 묻는 메시지를 출력한다.

- [ ]  추가 구매 여부 확인 메시지 출력하기
    
    `감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)`
    - [ ]  Y 입력시, 업데이트한 항목을 가지고 1번부터 다시 실행
    - [ ]  N 입력시, 종료
- [ ]  예외 발생

  `[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`
    - [ ]  아무것도 입력하지 않은 경우, 예외 메시지 출력 후, 다시 입력 받는다.
    - [ ]  Y와 N 이외의 문자를 입력한 경우, 예외 메시지 출력 후, 다시 입력 받는다.