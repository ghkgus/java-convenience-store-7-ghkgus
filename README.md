# 편의점

## 기능 구현 목록



### 파일 초기화 하기
주어진 파일을 읽어 주어진 상품명과 수량을 기준값으로 초기화한다.

- [x] 파일의 존재 여부를 확인
- [x] 파일이 존재할 경우
  - [x] products.md 파일을 가져와 상품명, 가격, 수량, 프로모션을 기준값으로 초기화 함
  - [x] promotions.md 파일을 가져와 프로모션 종류, 혜택, 기간을 기준값으로 초기화 함
- [x] 파일이 존재하지 않을 경우
  - [x] `[ERROR] 파일이 존재하지 않습니다.`는 예외 메시지 출력 후 프로그램 종료
- [x] products.md 파일 파싱 중 올바른지 아닌지 확인
  - [x] `[ERROR] 올바른 파일이 아닙니다`는 예외 메시지 출력 후 프로그램 종료

### 환영 인사하고, 보유중인 재고 보여주기
환영 인사 메시지를 출력한 후, 현재 보유한 재고 보여준다.

- [x]  환영인사 메시지 출력 : `안녕하세요. W편의점입니다.`
- [x]  상품 안내 메시지 출력 : `현재 보유하고 있는 상품입니다.`
- [x]  파일에서 상품명, 가격, 재고, 프로모션 이름 순으로 안내하기
    - [x] 재고가 0개라면, `재고 없음` 출력
    - [x] 프로모션이 있는 상품이랑 정가 상품 모두 있으면 프로모션 상품 먼저 출력

### 사용자로부터 구매할 상품과 수량 입력 받기
사용자로부터 구매하고자 하는 상품명과 수량을 입력 받고 재고를 확인 한다.

- [x]  입력메시지 출력하기 : `구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])`

- [x] 구매할 상품명과 수량을 기준으로 재고 확인하기
- [x]  예외 발생 - 예외 메시지 출력하고 다시 입력 받기
    - [x]  `[상품명-수량]` 형식이 아닐 경우 메시지 출력한 후, 다시 입력 받는다.
    - [x]  `[상품명-수량]`이 여러개 구매할 때, `쉼표(,)`로 연결되어 있지 않을 경우 메시지 출력한 후, 다시 입력 받는다.
    - [x]  입력한 상품명이 문자열이 아닐 경우 메시지 출력한 후, 다시 입력 받는다.
    - [x]  입력한 숫자가 문자열일 경우 메시지 출력한 후, 다시 입력 받는다.
    - [x]  입력해야할 상품명에 아무것도 입력되어 있지 않다면, 예외 메시지 출력 후, 다시 입력 받는다.
    - [x]  입력한 수량이 정수 범위의 숫자가 아닐 경우, 예외 메시지 출력 후, 다시 입력 받는다.
    - [x]  입력한 수량이 0이하일 경우, 예외 메시지 출력 후, 다시 입력 받는다.
    - [x]  상품 수량이 재고 수량을 초과할 경우 메시지 출력한 후, 다시 입력받는다.
    - [x]  상품 수량이 양의 정수 범위가 아닐 경우 메시지 출력한 후, 다시 입력 받는다.
    - [x]  입력한 상품명이 존재하지 않는 상품일 경우 메시지 출력한 후, 다시 입력 받는다.


### 프로모션 적용 여부 확인하기
주문한 상품이 프로모션 상품인지 확인하고, 프로모션 상품일 경우 행사할인가를 계산한다.

- [x] 구매하고자 하는 상품이 프로모션 상품인지 확인하기
- [x] 프로모션 종류 확인하기
- [x] 프로모션 적용 상품이 아닐 경우
- [x] 프로모션 적용 상품이 아닌 경우를 제외하고 우선적으로, 행사 기간인지 확인
- [x] 프로모션이 일부 적용되고, 나머지는 정가로 계산해야할 경우
  - [x] 일부 수량에 대해 정가로 결제할지 여부에 대한 안내 메시지 출력 : `현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)`
  - [x] 정가로 계산해야하는 수량 : 주문 수량 - 프로모션 개수 / (buy + get) * get - 프로모션 개수 / (buy + get) * buy
- [x] 프로모션이 적용되지만, 사용자에게 추가로 제품을 증정할 수 없는 경우
- [x] 프로모션이 적용되고 사용자에게 추가로 제품을 증정할 수 있는 경우
  - [x] 사용자에게 프로모션 혜택받을 수 있는 메시지 출력 : `현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)`
  - [x] 사용자 입력 수량 % (buy + get) == buy 와 같고, 프로모션 적용가능 수량 - 사용자 입력 수량 >= get
- [x]  사용자가 입력한 Y/N에 따라 행사 할인 증정 개수 확인하기
- [x]  예외 발생 - 예외 메시지 출력하고 다시 입력 받기
  - [x]  아무것도 입력하지 않은 경우, 예외 메시지 출력 후, 다시 입력 받는다.
  - [x]  Y와 N 이외의 문자를 입력한 경우, 예외 메시지 출력 후, 다시 입력 받는다.

### 멤버십 적용 여부 확인 후, 영수증 출력하기
사용자에게 멤버십 회원 할인을 받을지 의사를 묻는 메시지 출력한 후 멤버십 회원 할인을 받겠다는 사용자에게 한해, 멤버십 할인 금액을 계산한다. 이후, 사용자에게 영수증을 출력한다.

- [x] 사용자가 주문한 총 금액 확인하기
- [x] 프로모션 적용 상품의 가격 확인하기
- [x] 멤버십 회원 할인 여부 메시지 출력하기 : `멤버십 할인을 받으시겠습니까? (Y/N)`
- [x] 멤버십 회원 할인 받을 경우(Y입력할 경우)
    - [x]  멤버십 회원 할인 금액 = 프로모션 미적용 금액 * 0.3
    - [x]  할인 금액이 멤버십 회원 할인 금액의 최대 한도(8000원)보다 클 경우 8000원을 제외한 금액을 최종 금액으로 설정
- [x] 멤버십 회원 할인을 받을 경우 멤버십할인 금액 확인하기
- [x] 사용자가 지불해야할 금액 계산하기
- [x] 앞서 계산한 행사 할인 금액과 멤버십 금액을 토대로 지불해야할 금액 계산하기
  - [x] 내실 돈 = 총구매액 - 행사할인 - 멤버십 할인
- [x] 영수증 출력하기
  - [x] 구매내역(상품명, 수량, 금액) 출력
  - [x] 프로모션이 적용된 상품일 경우, 증정내역 출력
  - [x] 총 구매액, 행사 할인, 멤버십 할인, 내실 돈 출력
- [x]  예외 발생 - 예외 메시지 출력하고 다시 입력 받기
  - [x]  아무것도 입력하지 않은 경우, 예외 메시지 출력 후, 다시 입력 받는다.
  - [x]  Y와 N 이외의 문자를 입력한 경우, 예외 메시지 출력 후, 다시 입력 받는다.

### 재고 상황 업데이트하기
사용자가 주문한 후 상품들을 기반으로 재고 상황을 감소한다.

- [x] 프로모션까지 전부 적용된 상품들을 기반으로 사용자가 구매한 상품의 개수만큼 재고 감소
- [x] 프로모션 타입에 따라 우선 감소 제품 확인
- [x] 프로모션 미적용 상품일 경우 일반 재고 차감
- [x] 프로모션 적용되었지만, 일부는 원가로 해야할 경우 프로모션 재고 0으로 한 후 일반 재고 주문 수량 - 프로모션 재고 만큼 차감
- [x] 프로모션 적용되었고, 주문 수량이 프로모션 상품 보다 적을 경우 프로모션 상품 부터 차감

### 추가 구매 여부 확인하기
추가 상품을 구매할지 의사를 묻는 메시지를 출력한다.

- [x]  추가 구매 여부 확인 메시지 출력하기 : `감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)`
    - [x]  Y 입력시, 업데이트한 항목을 가지고 1번부터 다시 실행
    - [x]  N 입력시, 종료
- [x]  예외 발생 - 예외 메시지 출력하고 다시 입력 받기
    - [x]  아무것도 입력하지 않은 경우, 예외 메시지 출력 후, 다시 입력 받는다.
    - [x]  Y와 N 이외의 문자를 입력한 경우, 예외 메시지 출력 후, 다시 입력 받는다..